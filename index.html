<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seu Painel de Estudos ENEM - Zam Prep</title>
    <meta name="description" content="Acesse seu painel personalizado para o ENEM na Zam Prep: contador regressivo, análise de redação com IA, questões práticas e mais.">
    <meta name="keywords" content="ENEM, Zam Prep ENEM, preparação ENEM, IA ENEM, redação ENEM, simulados ENEM, contagem regressiva ENEM">
    <meta name="author" content="Zam Prep Team">
    <meta property="og:title" content="Painel ENEM - Zam Prep">
    <meta property="og:description" content="Acesse seu painel personalizado para o ENEM na Zam Prep: contador regressivo, análise de redação com IA, questões práticas e mais.">
    <meta property="og:image" content="https://enem.zamprep.com/social-share-enem.jpg"> <meta property="og:url" content="https://enem.zamprep.com/pt-br/"> <meta property="og:type" content="website">
    <link rel="canonical" href="https://enem.zamprep.com/pt-br/"> <link rel="stylesheet" href="/style.css"> 
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap">
    </head>
<body>

    <div id="loading-spinner" class="loading-spinner">
        Carregando painel ENEM...
    </div>

    <div class="content-wrapper" style="display: none;">
        <header>
            <nav>
                <a href="https://zamprep.com/pt-br/"><img src="/logo.png" alt="Zam Prep Logo" class="logo"></a>
                <div id="user-button"></div>
            </nav>
        </header>

        <main>
            <div class="dashboard-container">
                <section class="feature-box countdown-box">
                    <h2>Sua jornada para o sucesso no ENEM começa agora!</h2>
                    <div id="countdown-clock-V2">
                        <div class="days-container">
                            <span id="days">0</span>
                            <span class="days-label">Dias Restantes</span>
                        </div>
                        <p class="exam-dates">Datas do Exame: 2 e 9 de Novembro, 2025</p>
                    </div>
                </section>

                <section class="feature-box">
                    <h2>Receba um Feedback Poderoso para sua Redação</h2>
                    <p>Nossa IA analisa sua redação com base nas 5 competências oficiais do ENEM e te mostra exatamente onde melhorar para alcançar a nota 1000.</p>
                    <textarea id="essay-input" rows="15" placeholder="Cole sua redação aqui..."></textarea>
                    <button id="analyze-button" class="cta-button-main">Analisar Minha Redação</button>
                    
                    <div id="analysis-results" style="display: none;">
                        <h3>Resultados da Análise</h3>
                        <div id="results-content"></div>
                    </div>
                </section>
            </div>
        </main>
        
        <footer>
            <p>&copy; 2025 Zam Prep. Todos os direitos reservados.</p>
        </footer>
    </div>

    <script src="/script.js"></script>

    <script>
        async function initDashboardClerk() {
            const contentWrapper = document.querySelector('.content-wrapper');
            const userButton = document.getElementById('user-button');
            const loadingSpinner = document.getElementById('loading-spinner');
            const Clerk = window.Clerk; // Access the global Clerk object loaded by script.js

            if (!Clerk) {
                console.error("Clerk.js não disponível. Redirecionando.");
                window.location.href = "https://zamprep.com/pt-br/sign-in.html";
                return;
            }

            try {
                    await Clerk.load(); // Carrega a sessão do usuário
                    loadingSpinner.style.display = 'none'; // Oculta o indicador de carregamento

                    if (Clerk.user) {
                        contentWrapper.style.display = 'block'; // Exibe o conteúdo
                        Clerk.mountUserButton(userButton); // Monta o botão do usuário
                    } else {
                        window.location.href = "https://zamprep.com/pt-br/sign-in.html"; // Redireciona se não estiver logado
                    }
                } catch (err) {
                    console.error("Erro de inicialização do painel ENEM do Clerk:", err);
                    window.location.href = "https://zamprep.com/pt-br/sign-in.html"; // Redireciona em caso de erro
                }
            }

            document.addEventListener('DOMContentLoaded', () => {
                document.querySelector('.content-wrapper').style.display = 'none';
                document.getElementById('loading-spinner').style.display = 'block';
                document.getElementById('user-button').style.display = 'none'; // Mantém o botão do usuário oculto até ser montado
                initDashboardClerk(); // Inicia a inicialização do Clerk específica do painel
            });
    </script>

    <script src="/enem-dashboard-logic.js"></script>
</body>
</html>
